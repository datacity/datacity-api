# Gestion des tests du module generic-parser : 

Pour la mise en place des tests avec mocha rien de plus simple ! Il vous suffit simplement de lancer avec node le fichier mochaLauncher.js se trouvant     dans le répertoire test ou depuis cloud9 avec le simple boutton run.

    node mochaLauncher.js
    

## Tests CSV :


Pour les tests unitaires du parseur et du lexeur csv, nous avons répartit les tests en deux fichiers : 

    testCSVParser.js
    testCSVLexer.js
 

#### Exemple de test : 

```diff
Csv parser
    1) Gestion du readStream pour le from
    ✓ Appel pour le from et le to avec le path simplement
  Csv lexer:
    ✓ Should test the error function
        ➢ Error: Test my error
    ✓ Should test the parseLines function
    ✓ Should give invalid parameters on parseLines and get proper error
        ➢ Error: Invalid parameter on lines
    ✓ Should test the extractLines function
    ✓ Should test the parse function with a file of many separators and the : should not be considered as separator
        ➢ {"delimiter":",","quote":"\"","escape":"\""}
    ✓ Should test the parse function with a file of separator ;
        ➢ {"delimiter":";","quote":"\"","escape":"\""}
    2) Should test the parse function with a file of separator tab
    ✓ Should test the parse function with a file of separator :  
        ➢ {"delimiter":":","quote":"\"","escape":"\""}
    ✓ Should test the parse function with separator and fields surrounded by simple quote
        ➢ {"delimiter":";","quote":"'","escape":"\""}
9 passing (22ms)
  2 failing
  1) Csv parser Gestion du readStream pour le from:
     TypeError: path must be a string
      at Object.fs.open (fs.js:330:11)
      at CsvLexer.extractLines (/home/raphael/Developments/datacity-api/node_modules/genericparser/lib/csvLexer.js:72:8)
      at CsvLexer.parse (/home/raphael/Developments/datacity-api/node_modules/genericparser/lib/csvLexer.js:89:10)
      at CsvParser.from (/home/raphael/Developments/datacity-api/node_modules/genericparser/lib/parserCSV.js:55:9)
      at Context. (/home/raphael/Developments/datacity-api/node_modules/genericparser/test/testCSV.js:10:10)
      at Test.Runnable.run (/home/raphael/Developments/datacity-api/node_modules/genericparser/node_modules/mocha/lib/runnable.js:221:32)
      at Runner.runTest (/home/raphael/Developments/datacity-api/node_modules/genericparser/node_modules/mocha/lib/runner.js:378:10)
      at Runner.runTests.next (/home/raphael/Developments/datacity-api/node_modules/genericparser/node_modules/mocha/lib/runner.js:456:12)
      at next (/home/raphael/Developments/datacity-api/node_modules/genericparser/node_modules/mocha/lib/runner.js:303:14)
      at Runner.hooks (/home/raphael/Developments/datacity-api/node_modules/genericparser/node_modules/mocha/lib/runner.js:313:7)
  2) Csv lexer:  Should test the parse function with a file of separator tab:
      + expected - actual
      +"\t"
      -","
      
      at Object.Assertion.eql (/usr/lib/node_modules/should/lib/should.js:370:10)
      at null. (/home/raphael/Developments/datacity-api/node_modules/genericparser/test/testCSVLexer.js:79:38)
      at EventEmitter.emit (events.js:96:17)
      at CsvLexer.parseLines (/home/raphael/Developments/datacity-api/node_modules/genericparser/lib/csvLexer.js:57:10)
      at CsvLexer.parse (/home/raphael/Developments/datacity-api/node_modules/genericparser/lib/csvLexer.js:90:14)
      at CsvLexer.extractLines (/home/raphael/Developments/datacity-api/node_modules/genericparser/lib/csvLexer.js:79:21)
      at Object.wrapper [as oncomplete] (fs.js:362:17)
```










    
